@import url('https://fonts.googleapis.com/css2?family=Jersey+10&display=swap');

/* --- GLOBAL RESET --- */
* {
    box-sizing: border-box;
    /* Crucial for mobile sizing */
}

body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
}

.jersey-10-regular {
    font-family: "Jersey 10", sans-serif;
    font-weight: 400;
    font-style: normal;
}

/* --- NAVIGATION --- */
.fixed-bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(19, 19, 19, 0.85);
    /* Increased opacity for readability */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.5rem 0;
    padding-bottom: env(safe-area-inset-bottom, 20px);
    /* iPhone Home Bar fix */
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 100;
}

.nav-option {
    text-align: center;
    padding: 0.5rem;
    flex-grow: 1;
    padding-bottom: 20px;
}

.nav-option a {
    color: #9ca3af;
    text-decoration: none;
    font-size: 1rem;
    /* Slightly smaller text for mobile */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    font-family: "Jersey 10", sans-serif;
    transition: color 0.3s;
}

.nav-option a:hover,
.nav-option a.active {
    color: #52c471;
    text-shadow: 0 0 10px rgba(82, 196, 113, 0.4);
}

.nav-icon {
    font-size: 1.4rem;
}

/* --- DESKTOP SIDEBAR OVERRIDE --- */
@media (min-width: 768px) {
    .fixed-bottom-nav {
        top: 0;
        bottom: 0;
        left: 0;
        width: 80px;
        height: 100vh;
        flex-direction: column;
        justify-content: flex-start;
        padding: 2rem 0;
        border-right: 1px solid rgba(19, 19, 19, 0.31);
        border-top: none;
    }

    .nav-option {
        flex-grow: 0;
        width: 100%;
        margin-bottom: 1rem;
    }

    .nav-option a {
        padding: 0.5rem 0;
    }

    .main-content {
        margin-left: 80px;
        padding: 50px 40px;
        text-align: left;
    }

    section {
        padding-left: 80px;
    }
}

/* --- MAIN CONTENT & PAGES --- */
.main-content {
    padding: 20px 15px 100px 15px;
    /* Reduced side padding for mobile */
    z-index: 5;
    position: relative;
    color: #fff;
    min-height: 100vh;
    height: 100%;
}

.page {
    display: none;
    padding-bottom: 50px;
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.page.is-active {
    display: flex;
    flex-direction: column;
}

/* --- SUGGEST PAGE STYLES --- */
.song-cover-placeholder {
    width: 100%;
    max-width: 240px;
    height: auto;
    aspect-ratio: 1/1;
    border-radius: 1.5rem;
    display: block;
    object-fit: cover;
    margin: 0 auto;
    /* Center it */
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

.suggest-layout {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
    margin-top: 1.5rem;
    flex-direction: column;
    /* Default to column for mobile */
}

/* Desktop layout adjustment for suggest page */
@media(min-width: 768px) {
    .cover-wrapper {
        width: 300px;
        flex-shrink: 0;
    }
}

.cover-wrapper {
    gap: 20px;
    padding: 10px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.suggest-form {
    padding: 10px 0;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
}

.field-label {
    font-size: 1.1rem;
    display: block;
    color: #e5e7eb;
    margin-bottom: 0.25rem;
}

.search-row {
    display: flex;
    align-items: stretch;
    margin-top: 0.35rem;
    background: rgba(15, 23, 42, 0.8);
    border-radius: 999px;
    overflow: hidden;
    border: 1px solid rgba(148, 163, 184, 0.4);
    width: 100%;
}

#songSearchInput {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    padding: 0.8rem 1rem;
    color: #e5e7eb;
    font-size: 1rem;
    width: 100%;
    /* Ensure fits in flex */
    min-width: 0;
    /* Flexbox text overflow fix */
}

#songSearchInput::placeholder {
    color: #64748b;
}

.icon-button {
    border: none;
    background: linear-gradient(135deg, #4eba6b, #23402b);
    padding: 0 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    flex-shrink: 0;
}

.icon-button i {
    color: #0b1120;
    font-size: 1.1rem;
}

/* --- SEARCH RESULTS --- */
.search-results {
    list-style: none;
    padding: 0;
    margin: 10px 0 0 0;
    max-height: 40vh;
    /* Dynamic height */
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.search-result-item {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    padding: 0.6rem;
    border-radius: 0.8rem;
    background: #1f3726;
    cursor: pointer;
    border: 1px solid transparent;
}

.search-result-item:hover {
    background: #336b42;
}

.search-result-item.active {
    border-color: #48ac63;
    background: #336b42;
}

.search-result-cover {
    width: 50px;
    height: 50px;
    border-radius: 0.5rem;
    object-fit: cover;
    flex-shrink: 0;
}

.search-result-info {
    flex: 1;
    min-width: 0;
    /* Allows text truncation */
}

.search-result-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #e5e7eb;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-result-artist {
    font-size: 0.9rem;
    color: #9ca3af;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.primary-btn {
    margin-top: 1rem;
    padding: 0.8rem 1.5rem;
    border-radius: 999px;
    border: none;
    font-size: 1.1rem;
    font-weight: 600;
    color: white;
    cursor: pointer;
    width: 100%;
    box-shadow: 0 4px 15px #1DB954;
    background-color: #149240;
}

.primary-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
}

/* --- MODALS --- */
.modal {
    display: none;
    position: fixed;
    z-index: 200;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow-y: auto;
    /* Allow scrolling if modal is tall */
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    padding: 10px;
    align-items: center;
    justify-content: center;
}

.modal.is-active {
    display: flex;
    /* Flex centers content vertically */
}

.modal-content {
    background-color: #131313;
    padding: 25px;
    border: 1px solid #333;
    width: 100%;
    max-width: 500px;
    border-radius: 16px;
    position: relative;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    max-height: 90vh;
    /* Don't overflow screen height */
    overflow-y: auto;
    /* Scroll inside modal content */
}

.close-button {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    padding: 0 0 10px 10px;
}

/* --- FORM COMPONENTS --- */
.importance-selector {
    display: flex;
    gap: 0.25rem;
    margin-top: 0.5rem;
    background: rgba(15, 23, 42, 0.8);
    border-radius: 999px;
    padding: 0.25rem;
    overflow-x: auto;
    /* Handle overflow on very small screens */
}

.imp-btn {
    flex: 1;
    padding: 0.7rem 0.5rem;
    border: none;
    border-radius: 999px;
    background: transparent;
    color: #9ca3af;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.imp-btn[data-value="low"].active {
    background: #4f46e5;
    color: white;
}

.imp-btn[data-value="neutral"].active {
    background: #64748b;
    color: white;
}

.imp-btn[data-value="high"].active {
    background: #f59e0b;
    color: #0b1120;
}

.imp-btn[data-value="extreme"].active {
    background: #ef4444;
    color: white;
}

.modern-slider {
    width: 100%;
    -webkit-appearance: none;
    height: 6px;
    background: #334155;
    border-radius: 4px;
    margin-top: 1rem;
}

.modern-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #4eba6b;
    cursor: pointer;
    border: 3px solid #0b1120;
    box-shadow: 0 0 0 2px #4eba6b;
}

.slider-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    color: #9ca3af;
    margin-top: 0.5rem;
}

.modern-textarea,
.modern-input {
    width: 100%;
    padding: 0.8rem;
    border-radius: 0.75rem;
    border: 1px solid rgba(148, 163, 184, 0.4);
    background: rgba(15, 23, 42, 0.8);
    color: #e5e7eb;
    font-size: 1rem;
    font-family: inherit;
}

.time-input-row {
    border-radius: 0.75rem;
    padding: 0;
}

.time-input-row .modern-input {
    border: none;
    background: transparent;
    padding: 0.8rem;
}

/* Visibility Toggle */
.visibility-toggle-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    background: rgba(15, 23, 42, 0.4);
    padding: 10px;
    border-radius: 12px;
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #334155;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked+.slider {
    background-color: #4eba6b;
}

input:checked+.slider:before {
    transform: translateX(22px);
}


/* --- SONG CARD (Desktop Default) --- */
section {
    overflow-y: auto;
}

.suggestion-feed-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2rem;
    padding: 1rem;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
}

.mainPrefab {
    display: grid;
    /* Desktop: 6 columns */
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: auto 1fr 1fr 1fr 1fr auto 1fr 1fr;
    grid-template-areas:
        "targetInformationHolder targetInformationHolder targetInformationHolder targetInformationHolder seenByHolder editHolder"
        "albumCover albumCover albumCover albumCover artistCover artistCover"
        "albumCover albumCover albumCover albumCover artistCover artistCover"
        "albumCover albumCover albumCover albumCover importanceHolder ratingHolder"
        "albumCover albumCover albumCover albumCover playBtn userProfilePic"
        "SongInfoContainer SongInfoContainer SongInfoContainer SongInfoContainer userInfo userInfo"
        "commentsIcon addIcon likeIcon meh dislikeIcon reatcionsHolder"
        "highlightTimeContainer publisherCommentHolder publisherCommentHolder publisherCommentHolder publicStatusHolder LyricsBtnHolder";

    width: 100%;
    max-width: 550px;
    /* Card max width */
    margin: 0 auto;
    gap: 0.5rem;
    border-radius: 16px;
    padding: 0.75rem;
    position: relative;
    transition: all 0.3s ease-in-out;
    background-color: #111827;
    /* Fallback */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* Card Elements Common Styles */
.albumCover {
    grid-area: albumCover;
    border-radius: 11px;
    overflow: hidden;
    position: relative;
}

.albumCoverMAIN {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.artistCover {
    grid-area: artistCover;
    border-radius: 11px;
    object-fit: cover;
    width: 100%;
    height: 100%;
}

.playBtn {
    grid-area: playBtn;
    width: 100%;
    height: 100%;
    padding: 5px;
    cursor: pointer;
}

.SongInfoContainer {
    grid-area: SongInfoContainer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 0.8rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 11px;
    background: rgba(0, 0, 0, 0.2);
}

.titleElement {
    font-size: 1.8rem;
    margin: 0;
    line-height: 1.1;
    font-weight: 300;
    overflow-wrap: break-word;
}

.artistElement {
    font-size: 1rem;
    color: #ddd;
    margin: 0;
}

.userProfilePic {
    grid-area: userProfilePic;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    aspect-ratio: 1 / 1;
}

.userInfo {
    grid-area: userInfo;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 0 5px;
}

.userInfo p {
    margin: 0;
    line-height: 1.2;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.importanceHolder {
    grid-area: importanceHolder;
    display: flex;
    padding: 1rem;
    align-items: center;
    justify-content: center;
}

.importanceHolder img {
    width: 80%;
    height: auto;
}

.ratingHolder {
    grid-area: ratingHolder;
    position: relative;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.rating-star {
    width: 100%;
    height: 100%;
    overflow: visible;
}

#rating-number {
    position: absolute;
    font-weight: bold;
    z-index: 2;
    color: #fff;
}

/* Action Buttons */
.commentsIcon {
    grid-area: commentsIcon;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 11px;
    padding: 2em;
    cursor: pointer;
    object-fit: contain;
    width: 100%;
    height: 100%;
}

.addIcon {
    grid-area: addIcon;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 11px;
    padding: 2em;
    cursor: pointer;
    object-fit: contain;
    width: 100%;
    height: 100%;
}

.likeIcon {
    grid-area: likeIcon;
    background: #52c471;
    border-radius: 11px;
    padding: 2em;
    cursor: pointer;
    object-fit: contain;
    width: 100%;
    height: 100%;
    transition: transform 0.1s;
}

.dislikeIcon {
    grid-area: dislikeIcon;
    background: #F87B1B;
    border-radius: 11px;
    padding: 2em;
    cursor: pointer;
    object-fit: contain;
    width: 100%;
    height: 100%;
    transition: transform 0.1s;
}

.meh {
    grid-area: meh;
    background: #0199c2;
    border-radius: 11px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    cursor: pointer;
    margin: 0;
    width: 100%;
    height: 100%;
}

.reatcionsHolder {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 11px;
    grid-area: reatcionsHolder;
    padding: 1em;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
}

.reactionsIcon {
    width: 80%;
    height: auto;
}

/* Metadata boxes */
.highlightTimeContainer {
    grid-area: highlightTimeContainer;
}

.publisherCommentHolder {
    grid-area: publisherCommentHolder;
}

.publicStatusHolder {
    grid-area: publicStatusHolder;
}

.LyricsBtnHolder {
    grid-area: LyricsBtnHolder;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.lyricsIcon {
    width: 24px;
    height: 24px;
    margin-bottom: 2px;
}

.highlightTimeContainer,
.publisherCommentHolder,
.publicStatusHolder,
.LyricsBtnHolder {
    padding: 8px;
    background: rgba(0, 0, 0, 0.25);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.highlightTimeContainer p,
.publisherCommentHolder p,
.publicStatusHolder p,
.LyricsBtnHolder p {
    margin: 0;
    font-size: 0.85rem;
    line-height: 1.2;
}

/* Header areas */
.targetInformationHolder {
    grid-area: targetInformationHolder;
    display: flex;
    align-items: center;
}

.tragetInfoText {
    font-size: 1.5rem;
    margin: 0;
    font-weight: bold;
}

.seenByHolder {
    grid-area: seenByHolder;
    display: flex;
    align-items: center;
    justify-content: center;
}

.editHolder {
    grid-area: editHolder;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}


/* --- MOBILE SPECIFIC OVERRIDES (< 700px) --- */
@media (max-width: 700px) {

    .main-content {
        padding: 10px 10px 80px 10px;
        /* Less padding to give cards more width */
    }

    h1,
    h2 {
        font-size: 2rem !important;
        /* Cap header sizes */
    }

    /* Redefine Grid for Mobile: 4 Columns instead of 6 */
    .mainPrefab {
        grid-template-columns: 1fr 1fr 1fr 1fr;
        /* Re-map areas for a vertical flow */
        grid-template-areas:
            "targetInformationHolder targetInformationHolder seenByHolder editHolder"
            "albumCover albumCover albumCover albumCover"
            "albumCover albumCover albumCover albumCover"
            "SongInfoContainer SongInfoContainer SongInfoContainer SongInfoContainer"
            "artistCover importanceHolder ratingHolder playBtn"
            "userInfo userInfo userInfo userProfilePic"
            "commentsIcon likeIcon meh dislikeIcon"
            /* Reactions Row */
            "highlightTimeContainer addIcon publicStatusHolder reatcionsHolder"
            "publisherCommentHolder publisherCommentHolder publisherCommentHolder LyricsBtnHolder";

        /* Adjust row sizing */
        grid-template-rows: auto auto auto 70px 60px 60px auto auto auto;
        gap: 0.5rem;
        max-width: 100%;
        /* Use full width of container */
    }

    /* Adjust specific elements for the new mobile grid */

    .albumCover {
        aspect-ratio: 1 / 1;
        /* Forces a square shape */
        max-height: none;
        /* Allows it to grow to full width */
        width: 100%;
        /* Takes full width of the card */
    }

    .albumCoverMAIN {
        object-position: center;
        /* Centers the image */
    }

    .titleElement {
        font-size: 1.5rem;
        /* Smaller title */
    }

    .ratingHolder,
    .importanceHolder,
    .playBtn {
        border-radius: 11px;
        background: rgba(0, 0, 0, 0.2);
        /* Add background to these small tiles */
        padding: 1rem;
    }

    .userInfo {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 11px;
        padding: 0 10px;
    }

    .userInfo p:last-child {
        font-size: 1.2rem;
        /* Username size */
    }

    /* Make reaction buttons bigger for touch */
    .likeIcon,
    .dislikeIcon,
    .meh,
    .commentsIcon,
    .addIcon {
        padding: 2em;
    }

    /* Ensure text in bottom metadata boxes is readable */
    .publisherCommentHolder p {
        font-size: 0.9rem;
    }

    /* Suggestion Form mobile fixes */
    .suggest-layout {
        gap: 1rem;
    }

    .search-row {
        height: 50px;
        /* Taller touch target */
    }

    /* Scroll Snap logic for feed */
    .suggestion-feed-container {
        padding: 0;
        /* Remove padding to maximize width */
    }

    section[style*="overflow-y: scroll"] {
        scroll-snap-type: y mandatory;
    }

    .suggestion-card {
        scroll-snap-align: start;
        scroll-margin-top: 10px;
        margin-bottom: 2rem;
    }

    .userProfilePic {
        aspect-ratio: 1 / 1;
        /* Forces 1:1 square ratio */
        height: 100%;
        /* Fills the 60px row height */
        width: auto;
        /* Adjusts width to match height (60px) */
        justify-self: center;
        /* Centers it in its grid slot */

        /* Optional: Change this if you want a literal square box instead of a circle */
        /* border-radius: 11px; */
    }

    .reatcionsHolder {
        padding: 1.4rem;
    }

    .modal-content {
        width: 95%; /* Use more of the screen width */
        padding: 15px; /* Reduce padding to give results more space */
        max-height: 85vh;
    }

    #songSearchInput {
        font-size: 1.1rem !important; /* Slightly smaller for mobile keyboards */
    }

    .search-result-cover {
        width: 45px; /* Scale down image slightly for more text room */
        height: 45px;
    }
}

.LyricsBtnHolder {
    cursor: pointer;
    transition: background 0.2s ease, transform 0.08s ease;
}

.LyricsBtnHolder:hover {
    background-color: rgba(0, 0, 0, 0.45);
    transform: translateY(-1px);
}

.likeIcon.active,
.dislikeIcon.active {
    box-shadow: 0 0 0 3px #ffffffaa;
    transform: scale(1.05);
}

.meh.active {
    outline: 2px solid #ffffffaa;
    box-shadow: 0 0 10px #ffffff55;
}

/* 1. Define the Keyframe Animation for a quick Pop/Bounce effect */
@keyframes reactionPop {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.3);
    }

    100% {
        transform: scale(1.05);
    }
}

/* 2. Define the Keyframe Animation for an infinite Glow/Pulse effect (for when the reaction is active) */
@keyframes activePulse {
    0% {
        box-shadow: 0 0 0 0px rgba(255, 255, 255, 0.7);
    }

    100% {
        box-shadow: 0 0 0 5px rgba(255, 255, 255, 0);
    }
}

/* 3. Apply a quick transition to all reaction icons for smoothness */
.likeIcon,
.dislikeIcon,
.meh {
    transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
    cursor: pointer;
    /* Ensure the cursor indicates interactivity */
}

/* 4. Use the reactionPop animation when the element is clicked (active) */
.likeIcon.active,
.dislikeIcon.active {
    /* Existing styles from songsharestyle.css for active state */
    box-shadow: 0 0 0 3px #ffffffaa;
    transform: scale(1.05);
    /* NEW: Apply the pop on click */
    animation: reactionPop 0.3s ease-out forwards;
}

.meh.active {
    /* Existing styles from songsharestyle.css for active state */
    outline: 2px solid #ffffffaa;
    box-shadow: 0 0 10px #ffffff55;
    /* NEW: Apply the pop on click (meh is a paragraph, so need a wrapper/different style) */
    animation: reactionPop 0.3s ease-out forwards;
}

/* 5. Add a hover effect to hint at interactivity */
.likeIcon:hover,
.dislikeIcon:hover,
.meh:hover {
    transform: scale(1.1);
}

/* 6. Optional: Add a subtle continuous glow to the active icon */
.likeIcon.active,
.dislikeIcon.active,
.meh.active {
    /* Use a very subtle box-shadow pulse for the active state */
    box-shadow: 0 0 5px 2px rgba(255, 255, 255, 0.4);
    padding: 1.4rem;
}

@keyframes border-rotate {
    to {
        background-position: 200% center;
        /* Shift the gradient pattern */
    }
}

.suggestion-card {
    padding-bottom: 150px;
}

.suggestion-card.is-owner .mainPrefab {
    border: 2px solid #636363;
    /* Bright Cyan Border */
    box-shadow: 0 0 20px rgba(34, 211, 238, 0.25);
    /* Cyan Glow */
    transform: scale(1.01);
    /* Slightly larger */
    transition: all 0.3s ease;
}

/* 2. Highlight the "Created by you" / "Sent Privately" text */
.suggestion-card.is-owner .tragetInfoText {
    color: #22d3ee;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 1rem;
    background: rgba(34, 211, 238, 0.1);
    padding: 4px 12px;
    border-radius: 99px;
    display: inline-block;
}

/* --- PROFILE PAGE STYLES --- */
.profile-header-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-top: 20px;
}

.profile-avatar-wrapper {
    position: relative;
    width: 120px;
    height: 120px;
    margin-bottom: 15px;
}

#profilePageAvatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #22d3ee;
    box-shadow: 0 0 20px rgba(34, 211, 238, 0.3);
}

.profile-stats {
    display: flex;
    gap: 2rem;
    margin: 20px 0;
}

.stat-box {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.stat-number {
    font-size: 1.8rem;
    font-weight: bold;
    color: #fff;
}

.stat-label {
    font-size: 0.9rem;
    color: #9ca3af;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.profile-actions {
    display: flex;
    justify-content: center;
    margin-top: 10px;
    width: 100%;
}


/* Global Search Tabs */
.gs-tabs {
    display: flex;
    gap: 0.5rem;
    margin-top: 10px;
    background: rgba(15, 23, 42, 0.6);
    border: 1px solid rgba(148, 163, 184, 0.35);
    border-radius: 999px;
    padding: 6px;
}

.gs-tab {
    flex: 1;
    border: none;
    border-radius: 999px;
    padding: 10px 12px;
    background: transparent;
    color: #9ca3af;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.15s ease;
}

.gs-tab.active {
    color: #0b1120;
    background: linear-gradient(135deg, #23402b, #4eba6b);
}


.ctx {
    position: fixed;
    z-index: 99999;
    min-width: 180px;
    border-radius: 12px;
    overflow: hidden;
}

.ctx.hidden {
    display: none;
}


.ctx.hidden {
    display: none;
}

.ctx {
    position: absolute;
    z-index: 10000;
    background: rgba(20, 20, 20, 0.96);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 12px;
    padding: 6px;
    min-width: 180px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
}

.ctx button {
    width: 100%;
    text-align: left;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.92);
    padding: 10px 10px;
    border-radius: 10px;
    cursor: pointer;
}

.ctx button:hover {
    background: rgba(82, 196, 113, 0.10);
}

.ctx hr {
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.10);
    margin: 6px 0;
}

.ctx button.danger:hover {
    background: rgba(255, 80, 80, 0.12);
}

/* Multi-step Layout */
.suggest-step {
    display: none;
    animation: fadeIn 0.3s ease-in-out;
    background: rgba(255, 255, 255, 0.05);

}

.suggest-step.active {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding: 15px;
    border-radius: 11px;
    height: 40vh;
}

/* Step Indicator Dots */
.step-indicator {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding-top: 25px;
}

.step-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
}

.step-dot.active {
    background: #4eba6b;
    box-shadow: 0 0 10px rgba(78, 186, 107, 0.6);
    transform: scale(1.2);
}

/* Navigation Buttons */
.step-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 3rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.nav-step-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    padding: 0.8rem 2rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
}

.nav-step-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

#suggestPage { min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 2rem 10px 100px 10px; min-height: 400px; width: 80vw; max-width: 850px;}
#multiStepSuggestForm { width: 100%; max-width: none; /* Remove desktop cap to allow full width */ margin: 0 auto; display: flex; flex-direction: column; padding-inline: 12px; } 



.suggest-step {
    display: none;        /* Hide by default */
    flex-direction: column;
    padding: 40px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(15px);
    
    /* Uniform Dimensions */
    width: 100%;          /* Follows form width */
    min-height: 550px;    /* Uniform height for all steps */
    height: auto;
    box-sizing: border-box;
}


.suggest-step {
    width: 100%;
}

@media (min-width: 900px) { #multiStepSuggestForm { max-width: 850px; } }

@media (max-width: 600px) {
    #suggestPage {
        padding-left: 6px;
        padding-right: 6px;
    }
}


/* Ensure the navigation buttons follow the form width */
.step-navigation {
    width: 100%;
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
    padding-top: 1rem;
}

#step1 .step-title {
    align-self: flex-start;
    font-size: 3.5rem;
    margin-bottom: 2rem;
}

.step-title {
    font-size: 3.5rem;
    color: white;
    margin-bottom: 2rem;
    align-self: flex-start;
    /* Aligns "Step One:" to the left like the photo */
}

/* Glowing Icons */
.search-visual-container {
    display: flex;
    gap: 60px;
    justify-content: center;
}

.glow-icon {
    font-size: 4rem;
    color: white;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.6));
}

.glow-icon.spotify {
    color: #1DB954;
    filter: drop-shadow(0 0 15px rgba(29, 185, 84, 0.6));
}

.search-instruction {
    font-size: 1.8rem;
    color: #4eba6b;
    /* Matches the green text in photo */
    margin-bottom: 2.5rem;
}

/* The Green Button */
.search-trigger-btn {
    background-color: #1DB954;
    color: white;
    border: none;
    padding: 20px 0;
    font-size: 1.8rem;
    border-radius: 15px;
    cursor: pointer;
    width: 100%;
    max-width: 600px; /* Keeps button from being too wide in 850px box */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.search-trigger-btn:hover {
    background-color: #1ed760;
    transform: scale(1.02);
}

/* Step One specific alignment */
#step1 {
    align-items: center;
    /* Center icons and buttons */
}

#step1 .step-title {
    align-self: flex-start;
    /* Align "Step One:" to the top-left */
    font-size: 3.5rem;
    margin-bottom: 3rem;
}

.search-visual-container {
    display: flex;
    gap: 50px;
    margin-bottom: 3rem;
}

.glow-icon {
    font-size: 5rem;
    /* Larger icons for the 700px width */
    color: white;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.4));
}

.glow-icon.spotify {
    color: #1DB954;
    filter: drop-shadow(0 0 20px rgba(29, 185, 84, 0.5));
}

.search-trigger-btn {
    background-color: #1DB954;
    color: white;
    border: none;
    padding: 20px;
    font-size: 1.8rem;
    border-radius: 15px;
    cursor: pointer;
    width: 100%;
    /* Fills the 700px container */
    max-width: 500px;
    /* Keeps the button from looking too stretched */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

/* Importance Grid (Photo Style) */
/* Importance Grid - Permanent Color Palette */
.importance-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin: 20px 0;
}

.imp-card {
    border-radius: 12px;
    padding: 15px 5px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 4px solid transparent; /* The indicator space */
}

/* Permanent Background Colors from Photo */
.imp-card.low { background-color: #dcfce7; color: #166534; }      /* Light Green */
.imp-card.neutral { background-color: #fef9c3; color: #854d0e; }  /* Yellow */
.imp-card.high { background-color: #ffedd5; color: #9a3412; }     /* Orange/Peach */
.imp-card.extreme { background-color: #2e1065; color: #f87171; }  /* Deep Purple */

/* The Selection Indicator: A thick glowing border and slight lift */
.imp-card.active {
    transform: translateY(-5px) scale(1.05);
    border-color: #ffffff; /* White border as the indicator */
    box-shadow: 0 10px 20px rgba(0,0,0,0.4);
    z-index: 2;
}

.imp-card img {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

.imp-card span {
    font-family: "Jersey 10", sans-serif;
    font-size: 1.1rem;
    font-weight: bold;
}

/* Active States based on the photo colors */
.imp-card.low.active { background: #dcfce7; color: #166534; border-color: #3b82f6; }
.imp-card.neutral.active { background: #fef9c3; color: #854d0e; border-color: #4eba6b; }
.imp-card.high.active { background: #ffedd5; color: #9a3412; border-color: #f59e0b; }
.imp-card.extreme.active { background: #3730a3; color: #f87171; border-color: #ef4444; }

/* Dynamic Rating Styling */
.rating-dynamic-container {
    background: rgba(0,0,0,0.2);
    padding: 20px;
    border-radius: 20px;
    text-align: center;
}

#rating-value {
    font-family: "Jersey 10", sans-serif;
    font-size: 3.5rem;
    color: var(--primary-glow, #3b82f6);
    text-shadow: 0 0 10px var(--primary-glow);
}

.bars-container {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    gap: 4px;
    height: 60px;
    margin-bottom: 15px;
}

.bar {
    width: 6px;
    background: #2d3748;
    border-radius: 3px;
    transition: all 0.2s ease;
}

.slider-wrapper #rating-slider {
    -webkit-appearance: none;
    width: 100%;
    height: 6px;
    background: #1f2937;
    border-radius: 10px;
}

#rating-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px; height: 20px;
    background: white;
    border: 3px solid var(--primary-glow);
    border-radius: 50%;
    cursor: pointer;
}

/* Highlight Picker Specific Styles */
#highlightDisplay {
    font-family: "Jersey 10", sans-serif;
    font-size: 3.5rem;
    line-height: 1;
    color: var(--primary-glow, #3b82f6);
    text-shadow: 0 0 15px var(--primary-glow);
    transition: all 0.3s ease;
}

.visualizer-container .bar {
    flex: 1;
    background: #334155;
    border-radius: 4px;
    transition: height 0.3s ease, background 0.2s ease, transform 0.2s ease;
    min-height: 4px;
}

.slider-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
    appearance: none;
    -webkit-appearance: none;
    background: transparent;
    cursor: pointer;
    margin: 0;
}

.slider-overlay::-webkit-slider-thumb {
    appearance: none;
    -webkit-appearance: none;
    width: 2px;
    height: 60px;
    background: white;
    box-shadow: 0 0 15px white;
}


/* Segmented Switch Colors */
:root {
    --m-blue: #3b82f6;
    --m-purple: #a855f7;
    --m-border: rgba(255, 255, 255, 0.08);
}

.sharing-container { width: 100%; max-width: 400px; margin: 0 auto; }

.selector-track {
    display: flex; background: rgba(0, 0, 0, 0.2); padding: 4px;
    border-radius: 14px; margin-bottom: 20px; position: relative;
}

.selector-btn {
    flex: 1; padding: 10px; border: none; background: transparent;
    color: #94a3b8; font-size: 0.9rem; font-weight: 600; cursor: pointer;
    z-index: 1; transition: color 0.3s ease;
}

.selector-btn.active { color: white; }

.selector-pill {
    position: absolute; top: 4px; left: 4px; width: calc(50% - 4px);
    height: calc(100% - 8px); background: var(--m-blue); border-radius: 11px;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease;
}

/* User Selection Pills */
.user-pill {
    background: rgba(168, 85, 247, 0.2);
    border: 1px solid rgba(168, 85, 247, 0.4);
    color: white; padding: 4px 12px; border-radius: 999px;
    display: flex; align-items: center; gap: 8px; font-size: 0.85rem;
}

.remove-user { cursor: pointer; color: #f87171; font-weight: bold; }


/* Generic utility: used across the app (menus, panels, etc.) */
.hidden {
    display: none !important;
}


/* Ensure the holder can contain the absolute bubble */
.importanceHolder {
    position: relative; 
    cursor: pointer;
}

.importance-bubble {
    position: absolute;
    bottom: 120%; /* Position above the icon */
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: #fff;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 0.8rem;
    white-space: nowrap;
    z-index: 1000;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    animation: fadeInBubble 0.2s ease-out;
}

/* Small arrow pointing down */
.importance-bubble::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: rgba(0, 0, 0, 0.9) transparent transparent transparent;
}

@keyframes fadeInBubble {
    from { opacity: 0; transform: translateX(-50%) translateY(5px); }
    to { opacity: 1; transform: translateX(-50%) translateY(0); }
}


/* Help text bubble (Importance/Rating/Suggest) */
.importance-bubble {
    position: absolute;
    bottom: 120%; 
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.95);
    color: #fff;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 0.85rem;
    white-space: nowrap;
    z-index: 1000; /* Above the notification bubble */
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    pointer-events: none;
}

/* Red Notification Bubble (Counts) */
.notification-bubble {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: #ef4444; 
    color: white;
    font-size: 0.7rem;
    font-weight: bold;
    min-width: 18px;
    height: 18px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5px;
    border: 2px solid #111827;
    z-index: 10;
}


/* Update these in songsharestyle.css */

.search-results {
    width: 100%;
    padding: 0;
    margin: 10px 0;
    box-sizing: border-box; /* Ensures padding doesn't add to width */
}

.search-result-item {
    display: flex;
    width: 100%;
    box-sizing: border-box;
    padding: 10px;
    gap: 12px;
    align-items: center;
}

.search-result-info {
    flex: 1;
    min-width: 0; /* Critical for text-overflow to work in flexbox */
}

.search-result-title, 
.search-result-artist {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* Adds "..." if text is too long */
    display: block;
}


.page {
    display: none; 
    visibility: hidden; /* Extra safety */
    height: 0;         /* Prevent hidden pages from taking up vertical space */
    overflow: hidden;  /* Ensure no content leaks out */
}

.page.is-active {
    display: flex;
    visibility: visible;
    height: auto;      /* Return to normal height */
    flex-direction: column;
    padding-bottom: 120px; /* Space for the nav bar */
}

/* Ensure the container doesn't keep old snap points */
section[style*="overflow-y: scroll"] {
    scroll-behavior: auto !important; /* Prevents "sliding" animation when switching tabs */
}

/* Add to songsharestyle.css */
.playBtn:active {
    transform: scale(0.9);
    filter: brightness(1.2);
    transition: transform 0.1s ease;
}

@keyframes playPulse {
    0% { box-shadow: 0 0 0 0 rgba(29, 185, 84, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(29, 185, 84, 0); }
    100% { box-shadow: 0 0 0 0 rgba(29, 185, 84, 0); }
}

.playBtn.notified {
    animation: playPulse 0.5s ease-out;
}